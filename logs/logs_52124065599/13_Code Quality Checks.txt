2025-12-12T20:43:15.1609926Z Current runner version: '2.329.0'
2025-12-12T20:43:15.1633615Z ##[group]Runner Image Provisioner
2025-12-12T20:43:15.1634649Z Hosted Compute Agent
2025-12-12T20:43:15.1635182Z Version: 20251202.455
2025-12-12T20:43:15.1635879Z Commit: 6c10caca4910e198df60de23adf20ad317c474e3
2025-12-12T20:43:15.1636553Z Build Date: 2025-12-02T15:56:59Z
2025-12-12T20:43:15.1637209Z Worker ID: {3a8eebaf-3b5a-4af3-847b-0f5d4bdebd4b}
2025-12-12T20:43:15.1637929Z ##[endgroup]
2025-12-12T20:43:15.1638479Z ##[group]Operating System
2025-12-12T20:43:15.1639014Z Ubuntu
2025-12-12T20:43:15.1639530Z 24.04.3
2025-12-12T20:43:15.1640070Z LTS
2025-12-12T20:43:15.1640497Z ##[endgroup]
2025-12-12T20:43:15.1641100Z ##[group]Runner Image
2025-12-12T20:43:15.1641642Z Image: ubuntu-24.04
2025-12-12T20:43:15.1642159Z Version: 20251208.163.1
2025-12-12T20:43:15.1643138Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251208.163/images/ubuntu/Ubuntu2404-Readme.md
2025-12-12T20:43:15.1644973Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251208.163
2025-12-12T20:43:15.1646031Z ##[endgroup]
2025-12-12T20:43:15.1647130Z ##[group]GITHUB_TOKEN Permissions
2025-12-12T20:43:15.1648917Z Contents: read
2025-12-12T20:43:15.1649553Z Metadata: read
2025-12-12T20:43:15.1650082Z Packages: read
2025-12-12T20:43:15.1650603Z ##[endgroup]
2025-12-12T20:43:15.1652653Z Secret source: Actions
2025-12-12T20:43:15.1653366Z Prepare workflow directory
2025-12-12T20:43:15.2040717Z Prepare all required actions
2025-12-12T20:43:15.2078637Z Getting action download info
2025-12-12T20:43:15.5489220Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2025-12-12T20:43:15.6516921Z Download action repository 'actions/setup-python@v5' (SHA:a26af69be951a213d495a4c3e4e4022e16d87065)
2025-12-12T20:43:15.8169544Z Complete job name: Code Quality Checks
2025-12-12T20:43:15.8883393Z ##[group]Run actions/checkout@v4
2025-12-12T20:43:15.8884467Z with:
2025-12-12T20:43:15.8884885Z   repository: gabrielima7/Stack
2025-12-12T20:43:15.8885560Z   token: ***
2025-12-12T20:43:15.8886048Z   ssh-strict: true
2025-12-12T20:43:15.8886702Z   ssh-user: git
2025-12-12T20:43:15.8887127Z   persist-credentials: true
2025-12-12T20:43:15.8887583Z   clean: true
2025-12-12T20:43:15.8887994Z   sparse-checkout-cone-mode: true
2025-12-12T20:43:15.8888476Z   fetch-depth: 1
2025-12-12T20:43:15.8888870Z   fetch-tags: false
2025-12-12T20:43:15.8889272Z   show-progress: true
2025-12-12T20:43:15.8889689Z   lfs: false
2025-12-12T20:43:15.8890068Z   submodules: false
2025-12-12T20:43:15.8890467Z   set-safe-directory: true
2025-12-12T20:43:15.8891364Z env:
2025-12-12T20:43:15.8891765Z   PYTHON_VERSION_DEFAULT: 3.11
2025-12-12T20:43:15.8892228Z ##[endgroup]
2025-12-12T20:43:15.9984115Z Syncing repository: gabrielima7/Stack
2025-12-12T20:43:15.9985882Z ##[group]Getting Git version info
2025-12-12T20:43:15.9986728Z Working directory is '/home/runner/work/Stack/Stack'
2025-12-12T20:43:15.9987637Z [command]/usr/bin/git version
2025-12-12T20:43:16.0077142Z git version 2.52.0
2025-12-12T20:43:16.0103136Z ##[endgroup]
2025-12-12T20:43:16.0117480Z Temporarily overriding HOME='/home/runner/work/_temp/a934deb4-f927-40f1-aabb-2f320601928f' before making global git config changes
2025-12-12T20:43:16.0118856Z Adding repository directory to the temporary git global config as a safe directory
2025-12-12T20:43:16.0129911Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/Stack/Stack
2025-12-12T20:43:16.0172636Z Deleting the contents of '/home/runner/work/Stack/Stack'
2025-12-12T20:43:16.0176434Z ##[group]Initializing the repository
2025-12-12T20:43:16.0180140Z [command]/usr/bin/git init /home/runner/work/Stack/Stack
2025-12-12T20:43:16.0307438Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-12-12T20:43:16.0308528Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2025-12-12T20:43:16.0309702Z hint: to use in all of your new repositories, which will suppress this warning,
2025-12-12T20:43:16.0311227Z hint: call:
2025-12-12T20:43:16.0311857Z hint:
2025-12-12T20:43:16.0312658Z hint: 	git config --global init.defaultBranch <name>
2025-12-12T20:43:16.0313598Z hint:
2025-12-12T20:43:16.0314668Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-12-12T20:43:16.0315725Z hint: 'development'. The just-created branch can be renamed via this command:
2025-12-12T20:43:16.0316418Z hint:
2025-12-12T20:43:16.0316800Z hint: 	git branch -m <name>
2025-12-12T20:43:16.0317249Z hint:
2025-12-12T20:43:16.0317843Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-12-12T20:43:16.0318807Z Initialized empty Git repository in /home/runner/work/Stack/Stack/.git/
2025-12-12T20:43:16.0324858Z [command]/usr/bin/git remote add origin https://github.com/gabrielima7/Stack
2025-12-12T20:43:16.0359252Z ##[endgroup]
2025-12-12T20:43:16.0359965Z ##[group]Disabling automatic garbage collection
2025-12-12T20:43:16.0363196Z [command]/usr/bin/git config --local gc.auto 0
2025-12-12T20:43:16.0390937Z ##[endgroup]
2025-12-12T20:43:16.0391588Z ##[group]Setting up auth
2025-12-12T20:43:16.0397830Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-12T20:43:16.0428535Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-12T20:43:16.0821234Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-12T20:43:16.0852388Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-12T20:43:16.1082366Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-12T20:43:16.1116125Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-12T20:43:16.1369540Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-12-12T20:43:16.1406440Z ##[endgroup]
2025-12-12T20:43:16.1407721Z ##[group]Fetching the repository
2025-12-12T20:43:16.1417037Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +66608d266f8835005cdc5ce8e255cf8beab12bfe:refs/remotes/origin/main
2025-12-12T20:43:16.4266827Z From https://github.com/gabrielima7/Stack
2025-12-12T20:43:16.4267770Z  * [new ref]         66608d266f8835005cdc5ce8e255cf8beab12bfe -> origin/main
2025-12-12T20:43:16.4303494Z ##[endgroup]
2025-12-12T20:43:16.4304872Z ##[group]Determining the checkout info
2025-12-12T20:43:16.4306434Z ##[endgroup]
2025-12-12T20:43:16.4312352Z [command]/usr/bin/git sparse-checkout disable
2025-12-12T20:43:16.4359291Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-12-12T20:43:16.4387451Z ##[group]Checking out the ref
2025-12-12T20:43:16.4392197Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2025-12-12T20:43:16.4511400Z Switched to a new branch 'main'
2025-12-12T20:43:16.4512807Z branch 'main' set up to track 'origin/main'.
2025-12-12T20:43:16.4522367Z ##[endgroup]
2025-12-12T20:43:16.4567993Z [command]/usr/bin/git log -1 --format=%H
2025-12-12T20:43:16.4595594Z 66608d266f8835005cdc5ce8e255cf8beab12bfe
2025-12-12T20:43:16.4858344Z ##[group]Run actions/setup-python@v5
2025-12-12T20:43:16.4859054Z with:
2025-12-12T20:43:16.4859501Z   python-version: 3.11
2025-12-12T20:43:16.4860006Z   check-latest: false
2025-12-12T20:43:16.4860670Z   token: ***
2025-12-12T20:43:16.4861085Z   update-environment: true
2025-12-12T20:43:16.4861604Z   allow-prereleases: false
2025-12-12T20:43:16.4862152Z   freethreaded: false
2025-12-12T20:43:16.4862633Z env:
2025-12-12T20:43:16.4863025Z   PYTHON_VERSION_DEFAULT: 3.11
2025-12-12T20:43:16.4863559Z ##[endgroup]
2025-12-12T20:43:16.6543851Z ##[group]Installed versions
2025-12-12T20:43:16.6670328Z Successfully set up CPython (3.11.14)
2025-12-12T20:43:16.6671924Z ##[endgroup]
2025-12-12T20:43:16.6804974Z ##[group]Run pip install ruff
2025-12-12T20:43:16.6805748Z [36;1mpip install ruff[0m
2025-12-12T20:43:16.6854836Z shell: /usr/bin/bash -e {0}
2025-12-12T20:43:16.6855417Z env:
2025-12-12T20:43:16.6855816Z   PYTHON_VERSION_DEFAULT: 3.11
2025-12-12T20:43:16.6856508Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:16.6857489Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2025-12-12T20:43:16.6858486Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:16.6859351Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:16.6860458Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:16.6861554Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2025-12-12T20:43:16.6862436Z ##[endgroup]
2025-12-12T20:43:17.9752558Z Collecting ruff
2025-12-12T20:43:18.0311232Z   Downloading ruff-0.14.9-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (25 kB)
2025-12-12T20:43:18.0478318Z Downloading ruff-0.14.9-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (14.2 MB)
2025-12-12T20:43:18.1400990Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 14.2/14.2 MB 195.9 MB/s  0:00:00
2025-12-12T20:43:18.1678182Z Installing collected packages: ruff
2025-12-12T20:43:18.3292379Z Successfully installed ruff-0.14.9
2025-12-12T20:43:18.5436337Z ##[group]Run ruff check src/ tests/ stack_bootstrapper.py
2025-12-12T20:43:18.5436837Z [36;1mruff check src/ tests/ stack_bootstrapper.py[0m
2025-12-12T20:43:18.5471537Z shell: /usr/bin/bash -e {0}
2025-12-12T20:43:18.5471814Z env:
2025-12-12T20:43:18.5472035Z   PYTHON_VERSION_DEFAULT: 3.11
2025-12-12T20:43:18.5472383Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:18.5472830Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2025-12-12T20:43:18.5473271Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:18.5473678Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:18.5474321Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2025-12-12T20:43:18.5474712Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2025-12-12T20:43:18.5475091Z ##[endgroup]
2025-12-12T20:43:18.5687422Z E501 Line too long (105 > 88)
2025-12-12T20:43:18.5688183Z   --> src/stack/config/generators.py:92:89
2025-12-12T20:43:18.5688697Z    |
2025-12-12T20:43:18.5689424Z 90 | [tool.pytest.ini_options]
2025-12-12T20:43:18.5689922Z 91 | testpaths = ["tests"]
2025-12-12T20:43:18.5690769Z 92 | addopts = "-v --cov=src --cov-report=html --cov-report=term-missing --cov-fail-under=80 --strict-markers"
2025-12-12T20:43:18.5691671Z    |                                                                                         ^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5692210Z 93 | markers = [
2025-12-12T20:43:18.5692801Z 94 |     "slow: marks tests as slow (deselect with '-m \"not slow\"')",
2025-12-12T20:43:18.5693388Z    |
2025-12-12T20:43:18.5693576Z 
2025-12-12T20:43:18.5693794Z E501 Line too long (92 > 88)
2025-12-12T20:43:18.5694482Z   --> src/stack/config/models.py:44:89
2025-12-12T20:43:18.5694997Z    |
2025-12-12T20:43:18.5695552Z 42 |     enable_safety: bool = Field(default=True, description="Enable Safety SCA")
2025-12-12T20:43:18.5696483Z 43 |     enable_semgrep: bool = Field(default=True, description="Enable Semgrep")
2025-12-12T20:43:18.5697468Z 44 |     enable_detect_secrets: bool = Field(default=True, description="Enable secret detection")
2025-12-12T20:43:18.5698290Z    |                                                                                         ^^^^
2025-12-12T20:43:18.5698960Z 45 |     bandit_severity: Literal["low", "medium", "high"] = Field(
2025-12-12T20:43:18.5699572Z 46 |         default="low",
2025-12-12T20:43:18.5700445Z    |
2025-12-12T20:43:18.5701071Z 
2025-12-12T20:43:18.5701258Z E501 Line too long (90 > 88)
2025-12-12T20:43:18.5701799Z    --> src/stack/config/models.py:235:89
2025-12-12T20:43:18.5702269Z     |
2025-12-12T20:43:18.5702630Z 233 |         pattern = r"^\d+\.\d+$"
2025-12-12T20:43:18.5703115Z 234 |         if not re.match(pattern, value):
2025-12-12T20:43:18.5703822Z 235 |             msg = f"Python version '{value}' is invalid. Use format 'X.Y' (e.g., '3.12')."
2025-12-12T20:43:18.5704773Z     |                                                                                         ^^
2025-12-12T20:43:18.5705311Z 236 |             raise ValueError(msg)
2025-12-12T20:43:18.5705761Z     |
2025-12-12T20:43:18.5705942Z 
2025-12-12T20:43:18.5706396Z PLR2004 Magic value used in comparison, consider replacing `3` with a constant variable
2025-12-12T20:43:18.5707167Z    --> src/stack/config/models.py:239:20
2025-12-12T20:43:18.5707638Z     |
2025-12-12T20:43:18.5708042Z 238 |         major, minor = map(int, value.split("."))
2025-12-12T20:43:18.5708649Z 239 |         if major < 3 or (major == 3 and minor < 10):
2025-12-12T20:43:18.5709165Z     |                    ^
2025-12-12T20:43:18.5709735Z 240 |             msg = f"Python version {value} is not supported. Minimum is 3.10."
2025-12-12T20:43:18.5710372Z 241 |             raise ValueError(msg)
2025-12-12T20:43:18.5710811Z     |
2025-12-12T20:43:18.5710990Z 
2025-12-12T20:43:18.5711399Z PLR2004 Magic value used in comparison, consider replacing `3` with a constant variable
2025-12-12T20:43:18.5712392Z    --> src/stack/config/models.py:239:35
2025-12-12T20:43:18.5712862Z     |
2025-12-12T20:43:18.5713269Z 238 |         major, minor = map(int, value.split("."))
2025-12-12T20:43:18.5713852Z 239 |         if major < 3 or (major == 3 and minor < 10):
2025-12-12T20:43:18.5714536Z     |                                   ^
2025-12-12T20:43:18.5715164Z 240 |             msg = f"Python version {value} is not supported. Minimum is 3.10."
2025-12-12T20:43:18.5715800Z 241 |             raise ValueError(msg)
2025-12-12T20:43:18.5716262Z     |
2025-12-12T20:43:18.5716432Z 
2025-12-12T20:43:18.5716835Z PLR2004 Magic value used in comparison, consider replacing `10` with a constant variable
2025-12-12T20:43:18.5717388Z    --> src/stack/config/models.py:239:49
2025-12-12T20:43:18.5717676Z     |
2025-12-12T20:43:18.5717927Z 238 |         major, minor = map(int, value.split("."))
2025-12-12T20:43:18.5718285Z 239 |         if major < 3 or (major == 3 and minor < 10):
2025-12-12T20:43:18.5718620Z     |                                                 ^^
2025-12-12T20:43:18.5719028Z 240 |             msg = f"Python version {value} is not supported. Minimum is 3.10."
2025-12-12T20:43:18.5719476Z 241 |             raise ValueError(msg)
2025-12-12T20:43:18.5720099Z     |
2025-12-12T20:43:18.5720328Z 
2025-12-12T20:43:18.5720676Z SIM102 Use a single `if` statement instead of nested `if` statements
2025-12-12T20:43:18.5721323Z    --> src/stack/config/models.py:281:9
2025-12-12T20:43:18.5721767Z     |
2025-12-12T20:43:18.5721975Z 279 |           """
2025-12-12T20:43:18.5722303Z 280 |           # If paranoid security, ensure all security tools are enabled
2025-12-12T20:43:18.5722705Z 281 | /         if self.security.level == "paranoid":
2025-12-12T20:43:18.5723011Z 282 | |             if not all([
2025-12-12T20:43:18.5723298Z 283 | |                 self.security.enable_bandit,
2025-12-12T20:43:18.5723627Z 284 | |                 self.security.enable_safety,
2025-12-12T20:43:18.5724162Z 285 | |                 self.security.enable_semgrep,
2025-12-12T20:43:18.5724525Z 286 | |                 self.security.enable_detect_secrets,
2025-12-12T20:43:18.5724826Z 287 | |             ]):
2025-12-12T20:43:18.5725062Z     | |_______________^
2025-12-12T20:43:18.5725393Z 288 |                   msg = "Paranoid security level requires all security tools enabled."
2025-12-12T20:43:18.5725798Z 289 |                   raise ValueError(msg)
2025-12-12T20:43:18.5726067Z     |
2025-12-12T20:43:18.5726305Z help: Combine `if` statements using `and`
2025-12-12T20:43:18.5726677Z 
2025-12-12T20:43:18.5727085Z SIM108 Use ternary operator `resolved = path.resolve() if path.is_absolute() else (base_dir / path).resolve()` instead of `if`-`else`-block
2025-12-12T20:43:18.5727658Z    --> src/stack/security/guards.py:96:9
2025-12-12T20:43:18.5727939Z     |
2025-12-12T20:43:18.5728151Z  94 |       # Resolve the path
2025-12-12T20:43:18.5728399Z  95 |       try:
2025-12-12T20:43:18.5728626Z  96 | /         if path.is_absolute():
2025-12-12T20:43:18.5728933Z  97 | |             resolved = path.resolve()
2025-12-12T20:43:18.5729213Z  98 | |         else:
2025-12-12T20:43:18.5729479Z  99 | |             resolved = (base_dir / path).resolve()
2025-12-12T20:43:18.5729811Z     | |__________________________________________________^
2025-12-12T20:43:18.5730132Z 100 |       except (OSError, ValueError) as e:
2025-12-12T20:43:18.5730443Z 101 |           raise SecurityError(
2025-12-12T20:43:18.5730699Z     |
2025-12-12T20:43:18.5731161Z help: Replace `if`-`else`-block with `resolved = path.resolve() if path.is_absolute() else (base_dir / path).resolve()`
2025-12-12T20:43:18.5731568Z 
2025-12-12T20:43:18.5731777Z SIM102 Use a single `if` statement instead of nested `if` statements
2025-12-12T20:43:18.5732177Z    --> src/stack/security/guards.py:117:5
2025-12-12T20:43:18.5732457Z     |
2025-12-12T20:43:18.5732701Z 116 |       # Check for symlinks if not allowed
2025-12-12T20:43:18.5733063Z 117 | /     if not allow_symlinks and resolved.exists():
2025-12-12T20:43:18.5733544Z 118 | |         if resolved.is_symlink():
2025-12-12T20:43:18.5733862Z     | |_________________________________^
2025-12-12T20:43:18.5734391Z 119 |               raise SecurityError(
2025-12-12T20:43:18.5734717Z 120 |                   "Symlinks are not allowed",
2025-12-12T20:43:18.5734999Z     |
2025-12-12T20:43:18.5797220Z help: Combine `if` statements using `and`
2025-12-12T20:43:18.5797464Z 
2025-12-12T20:43:18.5797594Z E501 Line too long (89 > 88)
2025-12-12T20:43:18.5797911Z    --> src/stack/security/guards.py:194:89
2025-12-12T20:43:18.5798275Z     |
2025-12-12T20:43:18.5798578Z 192 |         # Get just the command name without path
2025-12-12T20:43:18.5798995Z 193 |         command_name = Path(base_command).name
2025-12-12T20:43:18.5799486Z 194 |         if command_name not in allowed_commands and base_command not in allowed_commands:
2025-12-12T20:43:18.5799959Z     |                                                                                         ^
2025-12-12T20:43:18.5800281Z 195 |             raise SecurityError(
2025-12-12T20:43:18.5800678Z 196 |                 f"Command not in allowed list: {command_name}",
2025-12-12T20:43:18.5800990Z     |
2025-12-12T20:43:18.5801105Z 
2025-12-12T20:43:18.5801220Z E501 Line too long (91 > 88)
2025-12-12T20:43:18.5801527Z   --> src/stack/security/sanitizers.py:51:89
2025-12-12T20:43:18.5801841Z    |
2025-12-12T20:43:18.5802102Z 49 |     # Remove null bytes and control characters
2025-12-12T20:43:18.5802449Z 50 |     result = result.replace("\x00", "")
2025-12-12T20:43:18.5802922Z 51 |     result = "".join(c for c in result if unicodedata.category(c) != "Cc" or c in "\n\r\t")
2025-12-12T20:43:18.5803391Z    |                                                                                         ^^^
2025-12-12T20:43:18.5803686Z 52 |
2025-12-12T20:43:18.5804095Z 53 |     # Handle HTML
2025-12-12T20:43:18.5804338Z    |
2025-12-12T20:43:18.5804449Z 
2025-12-12T20:43:18.5804586Z PLR0912 Too many branches (13 > 12)
2025-12-12T20:43:18.5804903Z    --> src/stack/security/sanitizers.py:155:5
2025-12-12T20:43:18.5805206Z     |
2025-12-12T20:43:18.5805421Z 155 | def sanitize_path(
2025-12-12T20:43:18.5805669Z     |     ^^^^^^^^^^^^^
2025-12-12T20:43:18.5805912Z 156 |     path: str | Path,
2025-12-12T20:43:18.5806158Z 157 |     *,
2025-12-12T20:43:18.5806357Z     |
2025-12-12T20:43:18.5806472Z 
2025-12-12T20:43:18.5806762Z PLR2004 Magic value used in comparison, consider replacing `128` with a constant variable
2025-12-12T20:43:18.5807235Z    --> src/stack/security/sanitizers.py:290:22
2025-12-12T20:43:18.5807718Z     |
2025-12-12T20:43:18.5807981Z 289 |     # Check length (most DBs limit to 128 chars)
2025-12-12T20:43:18.5808292Z 290 |     if len(result) > 128:
2025-12-12T20:43:18.5808560Z     |                      ^^^
2025-12-12T20:43:18.5808822Z 291 |         result = result[:128]
2025-12-12T20:43:18.5809077Z     |
2025-12-12T20:43:18.5809215Z 
2025-12-12T20:43:18.5809337Z E501 Line too long (166 > 88)
2025-12-12T20:43:18.5809649Z   --> src/stack/security/validators.py:65:89
2025-12-12T20:43:18.5809980Z    |
2025-12-12T20:43:18.5810364Z 63 | …
2025-12-12T20:43:18.5810580Z 64 | …
2025-12-12T20:43:18.5811213Z 65 | …owed: letters, numbers{', hyphens' if allow_hyphen else ''}{', underscores' if allow_underscore else ''}"
2025-12-12T20:43:18.5811770Z    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5812080Z 66 | …
2025-12-12T20:43:18.5812277Z    |
2025-12-12T20:43:18.5812386Z 
2025-12-12T20:43:18.5812688Z PLR2004 Magic value used in comparison, consider replacing `3` with a constant variable
2025-12-12T20:43:18.5813157Z    --> src/stack/security/validators.py:118:17
2025-12-12T20:43:18.5813452Z     |
2025-12-12T20:43:18.5813685Z 116 |         raise ValueError(msg) from e
2025-12-12T20:43:18.5814151Z 117 |
2025-12-12T20:43:18.5814364Z 118 |     if major != 3:
2025-12-12T20:43:18.5814614Z     |                 ^
2025-12-12T20:43:18.5814923Z 119 |         msg = f"Only Python 3.x is supported, got {major}.x"
2025-12-12T20:43:18.5815418Z 120 |         raise ValueError(msg)
2025-12-12T20:43:18.5815684Z     |
2025-12-12T20:43:18.5815794Z 
2025-12-12T20:43:18.5816070Z PLR2004 Magic value used in comparison, consider replacing `10` with a constant variable
2025-12-12T20:43:18.5816538Z    --> src/stack/security/validators.py:122:16
2025-12-12T20:43:18.5816821Z     |
2025-12-12T20:43:18.5817037Z 120 |         raise ValueError(msg)
2025-12-12T20:43:18.5817282Z 121 |
2025-12-12T20:43:18.5817489Z 122 |     if minor < 10:
2025-12-12T20:43:18.5817736Z     |                ^^
2025-12-12T20:43:18.5818071Z 123 |         msg = f"Python 3.{minor} is not supported. Minimum is 3.10"
2025-12-12T20:43:18.5818440Z 124 |         raise ValueError(msg)
2025-12-12T20:43:18.5818686Z     |
2025-12-12T20:43:18.5818794Z 
2025-12-12T20:43:18.5819081Z PLR2004 Magic value used in comparison, consider replacing `64` with a constant variable
2025-12-12T20:43:18.5819538Z    --> src/stack/security/validators.py:159:21
2025-12-12T20:43:18.5819823Z     |
2025-12-12T20:43:18.5820066Z 157 |     local, domain = email.rsplit("@", 1)
2025-12-12T20:43:18.5820347Z 158 |
2025-12-12T20:43:18.5820557Z 159 |     if len(local) > 64:
2025-12-12T20:43:18.5820817Z     |                     ^^
2025-12-12T20:43:18.5821124Z 160 |         msg = "Email local part exceeds 64 characters"
2025-12-12T20:43:18.5821456Z 161 |         raise ValueError(msg)
2025-12-12T20:43:18.5821705Z     |
2025-12-12T20:43:18.5821815Z 
2025-12-12T20:43:18.5822092Z PLR2004 Magic value used in comparison, consider replacing `255` with a constant variable
2025-12-12T20:43:18.5822557Z    --> src/stack/security/validators.py:163:22
2025-12-12T20:43:18.5822832Z     |
2025-12-12T20:43:18.5823048Z 161 |         raise ValueError(msg)
2025-12-12T20:43:18.5823294Z 162 |
2025-12-12T20:43:18.5823509Z 163 |     if len(domain) > 255:
2025-12-12T20:43:18.5823768Z     |                      ^^^
2025-12-12T20:43:18.5824656Z 164 |         msg = "Email domain exceeds 255 characters"
2025-12-12T20:43:18.5825022Z 165 |         raise ValueError(msg)
2025-12-12T20:43:18.5825277Z     |
2025-12-12T20:43:18.5825387Z 
2025-12-12T20:43:18.5825744Z SIM102 Use a single `if` statement instead of nested `if` statements
2025-12-12T20:43:18.5826141Z    --> src/stack/security/validators.py:215:9
2025-12-12T20:43:18.5826423Z     |
2025-12-12T20:43:18.5826664Z 213 |           # Check for TLD (at least one dot)
2025-12-12T20:43:18.5827083Z 214 |           domain = parsed.netloc.split(":")[0]  # Remove port if present
2025-12-12T20:43:18.5827660Z 215 | /         if "." not in domain or domain.endswith("."):
2025-12-12T20:43:18.5828028Z 216 | |             # Allow localhost for development
2025-12-12T20:43:18.5828491Z 217 | |             if domain.lower() not in ("localhost", "127.0.0.1", "::1"):
2025-12-12T20:43:18.5828918Z     | |_______________________________________________________________________^
2025-12-12T20:43:18.5829315Z 218 |                   msg = f"URL domain must have a TLD: {domain}"
2025-12-12T20:43:18.5829668Z 219 |                   raise ValueError(msg)
2025-12-12T20:43:18.5829951Z     |
2025-12-12T20:43:18.5830191Z help: Combine `if` statements using `and`
2025-12-12T20:43:18.5830393Z 
2025-12-12T20:43:18.5830685Z PLR2004 Magic value used in comparison, consider replacing `65535` with a constant variable
2025-12-12T20:43:18.5831155Z    --> src/stack/security/validators.py:289:35
2025-12-12T20:43:18.5831445Z     |
2025-12-12T20:43:18.5831673Z 287 |         raise ValueError(msg) from e
2025-12-12T20:43:18.5831947Z 288 |
2025-12-12T20:43:18.5832200Z 289 |     if port_int < 0 or port_int > 65535:
2025-12-12T20:43:18.5832504Z     |                                   ^^^^^
2025-12-12T20:43:18.5832852Z 290 |         msg = f"Port must be between 0 and 65535: {port_int}"
2025-12-12T20:43:18.5833191Z 291 |         raise ValueError(msg)
2025-12-12T20:43:18.5833445Z     |
2025-12-12T20:43:18.5833553Z 
2025-12-12T20:43:18.5833828Z PLR2004 Magic value used in comparison, consider replacing `1024` with a constant variable
2025-12-12T20:43:18.5834668Z    --> src/stack/security/validators.py:293:44
2025-12-12T20:43:18.5834972Z     |
2025-12-12T20:43:18.5835184Z 291 |         raise ValueError(msg)
2025-12-12T20:43:18.5835438Z 292 |
2025-12-12T20:43:18.5835691Z 293 |     if not allow_privileged and port_int < 1024:
2025-12-12T20:43:18.5836024Z     |                                            ^^^^
2025-12-12T20:43:18.5836400Z 294 |         msg = f"Privileged ports (< 1024) are not allowed: {port_int}"
2025-12-12T20:43:18.5836771Z 295 |         raise ValueError(msg)
2025-12-12T20:43:18.5837027Z     |
2025-12-12T20:43:18.5837144Z 
2025-12-12T20:43:18.5837321Z PLR0913 Too many arguments in function definition (7 > 5)
2025-12-12T20:43:18.5837683Z   --> src/stack/utils/filesystem.py:69:5
2025-12-12T20:43:18.5837952Z    |
2025-12-12T20:43:18.5838156Z 69 | def safe_write(
2025-12-12T20:43:18.5838379Z    |     ^^^^^^^^^^
2025-12-12T20:43:18.5838620Z 70 |     path: Path | str,
2025-12-12T20:43:18.5838864Z 71 |     content: str,
2025-12-12T20:43:18.5839085Z    |
2025-12-12T20:43:18.5839199Z 
2025-12-12T20:43:18.5839338Z RUF059 Unpacked variable `fd` is never used
2025-12-12T20:43:18.5839665Z    --> src/stack/utils/filesystem.py:127:9
2025-12-12T20:43:18.5839944Z     |
2025-12-12T20:43:18.5840140Z 125 |     if atomic:
2025-12-12T20:43:18.5840416Z 126 |         # Write to temp file first, then rename
2025-12-12T20:43:18.5840753Z 127 |         fd, temp_path = tempfile.mkstemp(
2025-12-12T20:43:18.5841044Z     |         ^^
2025-12-12T20:43:18.5841277Z 128 |             dir=path.parent,
2025-12-12T20:43:18.5841578Z 129 |             prefix=f".{path.name}.",
2025-12-12T20:43:18.5841842Z     |
2025-12-12T20:43:18.5842155Z help: Prefix it with an underscore or any other dummy variable pattern
2025-12-12T20:43:18.5842425Z 
2025-12-12T20:43:18.5842542Z E501 Line too long (118 > 88)
2025-12-12T20:43:18.5842818Z   --> src/stack/utils/logging.py:24:89
2025-12-12T20:43:18.5843086Z    |
2025-12-12T20:43:18.5843290Z 22 | # Default log format
2025-12-12T20:43:18.5843658Z 23 | DEFAULT_FORMAT = "%(asctime)s | %(levelname)-8s | %(name)s | %(message)s"
2025-12-12T20:43:18.5844472Z 24 | JSON_FORMAT = '{"timestamp": "%(asctime)s", "level": "%(levelname)s", "logger": "%(name)s", "message": "%(message)s"}'
2025-12-12T20:43:18.5845013Z    |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5845305Z    |
2025-12-12T20:43:18.5845427Z 
2025-12-12T20:43:18.5845590Z PLC0415 `import` should be at the top-level of a file
2025-12-12T20:43:18.5846082Z    --> src/stack/utils/logging.py:295:5
2025-12-12T20:43:18.5846356Z     |
2025-12-12T20:43:18.5846556Z 294 |     """
2025-12-12T20:43:18.5846808Z 295 |     from contextlib import contextmanager
2025-12-12T20:43:18.5847125Z     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5847381Z 296 |
2025-12-12T20:43:18.5847601Z 297 |     @contextmanager
2025-12-12T20:43:18.5847827Z     |
2025-12-12T20:43:18.5847938Z 
2025-12-12T20:43:18.5848124Z TRY400 Use `logging.exception` instead of `logging.error`
2025-12-12T20:43:18.5848490Z    --> src/stack/utils/logging.py:315:13
2025-12-12T20:43:18.5848757Z     |
2025-12-12T20:43:18.5848984Z 313 |           except Exception as e:
2025-12-12T20:43:18.5849401Z 314 |               duration = (datetime.now(timezone.utc) - start_time).total_seconds()
2025-12-12T20:43:18.5849801Z 315 | /             logger.error(
2025-12-12T20:43:18.5850088Z 316 | |                 f"Failed: {operation}",
2025-12-12T20:43:18.5850410Z 317 | |                 duration_seconds=duration,
2025-12-12T20:43:18.5850723Z 318 | |                 error=str(e),
2025-12-12T20:43:18.5850977Z 319 | |             )
2025-12-12T20:43:18.5851203Z     | |_____________^
2025-12-12T20:43:18.5851430Z 320 |               raise
2025-12-12T20:43:18.5851672Z 321 |           finally:
2025-12-12T20:43:18.5851909Z     |
2025-12-12T20:43:18.5852127Z help: Replace with `exception`
2025-12-12T20:43:18.5852295Z 
2025-12-12T20:43:18.5852465Z PLR0913 Too many arguments in function definition (8 > 5)
2025-12-12T20:43:18.5852958Z    --> src/stack/utils/subprocess.py:100:5
2025-12-12T20:43:18.5853239Z     |
2025-12-12T20:43:18.5853449Z 100 | def run_safe_command(
2025-12-12T20:43:18.5853697Z     |     ^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5854115Z 101 |     command: Sequence[str],
2025-12-12T20:43:18.5854374Z 102 |     *,
2025-12-12T20:43:18.5854571Z     |
2025-12-12T20:43:18.5854685Z 
2025-12-12T20:43:18.5854850Z PLC0415 `import` should be at the top-level of a file
2025-12-12T20:43:18.5855204Z    --> src/stack/utils/subprocess.py:141:5
2025-12-12T20:43:18.5855482Z     |
2025-12-12T20:43:18.5855669Z 140 |     """
2025-12-12T20:43:18.5855884Z 141 |     import time
2025-12-12T20:43:18.5856109Z     |     ^^^^^^^^^^^
2025-12-12T20:43:18.5856313Z 142 |
2025-12-12T20:43:18.5856522Z 143 |     # Convert to list
2025-12-12T20:43:18.5856746Z     |
2025-12-12T20:43:18.5856858Z 
2025-12-12T20:43:18.5857052Z S603 `subprocess` call: check for execution of untrusted input
2025-12-12T20:43:18.5857426Z    --> src/stack/utils/subprocess.py:193:18
2025-12-12T20:43:18.5857704Z     |
2025-12-12T20:43:18.5857891Z 192 |     try:
2025-12-12T20:43:18.5858130Z 193 |         result = subprocess.run(
2025-12-12T20:43:18.5858405Z     |                  ^^^^^^^^^^^^^^
2025-12-12T20:43:18.5858672Z 194 |             validated_cmd,
2025-12-12T20:43:18.5858928Z 195 |             cwd=cwd,
2025-12-12T20:43:18.5859147Z     |
2025-12-12T20:43:18.5859254Z 
2025-12-12T20:43:18.5859371Z E501 Line too long (110 > 88)
2025-12-12T20:43:18.5859654Z    --> src/stack/utils/subprocess.py:207:89
2025-12-12T20:43:18.5859940Z     |
2025-12-12T20:43:18.5860147Z 205 |         stdout_str = ""
2025-12-12T20:43:18.5860465Z 206 |         if hasattr(e, "stdout") and e.stdout is not None:
2025-12-12T20:43:18.5861006Z 207 |             stdout_str = e.stdout if isinstance(e.stdout, str) else e.stdout.decode("utf-8", errors="replace")
2025-12-12T20:43:18.5861525Z     |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5861862Z 208 |         return SafeCommandResult(
2025-12-12T20:43:18.5862155Z 209 |             command=validated_cmd,
2025-12-12T20:43:18.5862422Z     |
2025-12-12T20:43:18.5862530Z 
2025-12-12T20:43:18.5862733Z PLW2901 `for` loop variable `line` overwritten by assignment target
2025-12-12T20:43:18.5863125Z    --> src/stack/utils/subprocess.py:335:17
2025-12-12T20:43:18.5863403Z     |
2025-12-12T20:43:18.5863637Z 333 |             # Return first non-empty line
2025-12-12T20:43:18.5864227Z 334 |             for line in result.stdout.split("\n"):
2025-12-12T20:43:18.5864550Z 335 |                 line = line.strip()
2025-12-12T20:43:18.5864830Z     |                 ^^^^
2025-12-12T20:43:18.5865067Z 336 |                 if line:
2025-12-12T20:43:18.5865320Z 337 |                     return line
2025-12-12T20:43:18.5865565Z     |
2025-12-12T20:43:18.5865681Z 
2025-12-12T20:43:18.5865853Z TRY300 Consider moving this statement to an `else` block
2025-12-12T20:43:18.5866221Z    --> src/stack/utils/subprocess.py:338:9
2025-12-12T20:43:18.5866491Z     |
2025-12-12T20:43:18.5866700Z 336 |                 if line:
2025-12-12T20:43:18.5866948Z 337 |                     return line
2025-12-12T20:43:18.5867213Z 338 |         return None
2025-12-12T20:43:18.5867446Z     |         ^^^^^^^^^^^
2025-12-12T20:43:18.5867758Z 339 |     except (SecurityError, subprocess.SubprocessError):
2025-12-12T20:43:18.5868091Z 340 |         return None
2025-12-12T20:43:18.5868315Z     |
2025-12-12T20:43:18.5868430Z 
2025-12-12T20:43:18.5868593Z UP009 [*] UTF-8 encoding declaration is unnecessary
2025-12-12T20:43:18.5868919Z  --> stack_bootstrapper.py:2:1
2025-12-12T20:43:18.5869164Z   |
2025-12-12T20:43:18.5869368Z 1 | #!/usr/bin/env python
2025-12-12T20:43:18.5869622Z 2 | # -*- coding: utf-8 -*-
2025-12-12T20:43:18.5869868Z   | ^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5870097Z 3 | """
2025-12-12T20:43:18.5870581Z 4 | Este script automatiza a configuração inicial de um ambiente Python focado em
2025-12-12T20:43:18.5871170Z   |
2025-12-12T20:43:18.5871409Z help: Remove unnecessary coding comment
2025-12-12T20:43:18.5871610Z 
2025-12-12T20:43:18.5871806Z D205 1 blank line required between summary line and description
2025-12-12T20:43:18.5872186Z  --> stack_bootstrapper.py:3:1
2025-12-12T20:43:18.5872429Z   |
2025-12-12T20:43:18.5872637Z 1 |   #!/usr/bin/env python
2025-12-12T20:43:18.5872891Z 2 |   # -*- coding: utf-8 -*-
2025-12-12T20:43:18.5873137Z 3 | / """
2025-12-12T20:43:18.5873556Z 4 | | Este script automatiza a configuração inicial de um ambiente Python focado em
2025-12-12T20:43:18.5874277Z 5 | | performance, segurança e integridade.
2025-12-12T20:43:18.5874569Z 6 | | """
2025-12-12T20:43:18.5874761Z   | |___^
2025-12-12T20:43:18.5874945Z 7 |
2025-12-12T20:43:18.5875147Z 8 |   __version__ = "1.0.0"
2025-12-12T20:43:18.5875378Z   |
2025-12-12T20:43:18.5875587Z help: Insert single blank line
2025-12-12T20:43:18.5875751Z 
2025-12-12T20:43:18.5875919Z UP035 `typing.List` is deprecated, use `list` instead
2025-12-12T20:43:18.5876271Z   --> stack_bootstrapper.py:17:1
2025-12-12T20:43:18.5876531Z    |
2025-12-12T20:43:18.5876722Z 15 | import sys
2025-12-12T20:43:18.5876971Z 16 | from pathlib import Path
2025-12-12T20:43:18.5877262Z 17 | from typing import List, NoReturn
2025-12-12T20:43:18.5877553Z    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5877809Z 18 |
2025-12-12T20:43:18.5878072Z 19 | # Constantes de configuração
2025-12-12T20:43:18.5878331Z    |
2025-12-12T20:43:18.5878437Z 
2025-12-12T20:43:18.5878549Z T201 `print` found
2025-12-12T20:43:18.5878799Z   --> stack_bootstrapper.py:35:5
2025-12-12T20:43:18.5879045Z    |
2025-12-12T20:43:18.5879299Z 34 |     prefix = "[DRY-RUN] " if args.dry_run else ""
2025-12-12T20:43:18.5879621Z 35 |     print(f"{prefix}{message}")
2025-12-12T20:43:18.5879886Z    |     ^^^^^
2025-12-12T20:43:18.5880089Z 36 |
2025-12-12T20:43:18.5880328Z 37 | def _handle_error(message: str) -> NoReturn:
2025-12-12T20:43:18.5880622Z    |
2025-12-12T20:43:18.5880826Z help: Remove `print`
2025-12-12T20:43:18.5880975Z 
2025-12-12T20:43:18.5881080Z T201 `print` found
2025-12-12T20:43:18.5881324Z   --> stack_bootstrapper.py:39:5
2025-12-12T20:43:18.5881581Z    |
2025-12-12T20:43:18.5881819Z 37 | def _handle_error(message: str) -> NoReturn:
2025-12-12T20:43:18.5882179Z 38 |     """Exibe uma mensagem de erro e encerra o script."""
2025-12-12T20:43:18.5882602Z 39 |     print(f"❌ Erro: {message}", file=sys.stderr)
2025-12-12T20:43:18.5882893Z    |     ^^^^^
2025-12-12T20:43:18.5883254Z 40 |     sys.exit(1)
2025-12-12T20:43:18.5883463Z    |
2025-12-12T20:43:18.5883672Z help: Remove `print`
2025-12-12T20:43:18.5883809Z 
2025-12-12T20:43:18.5884091Z UP006 [*] Use `list` instead of `List` for type annotation
2025-12-12T20:43:18.5884446Z   --> stack_bootstrapper.py:43:14
2025-12-12T20:43:18.5884699Z    |
2025-12-12T20:43:18.5884899Z 42 | def _run_command(
2025-12-12T20:43:18.5885269Z 43 |     command: List[str], args: argparse.Namespace, capture_output: bool = False
2025-12-12T20:43:18.5885658Z    |              ^^^^
2025-12-12T20:43:18.5885926Z 44 | ) -> subprocess.CompletedProcess[str]:
2025-12-12T20:43:18.5886322Z 45 |     """Executa um comando no shell, tratando erros e modo dry-run."""
2025-12-12T20:43:18.5886659Z    |
2025-12-12T20:43:18.5886867Z help: Replace with `list`
2025-12-12T20:43:18.5887025Z 
2025-12-12T20:43:18.5887212Z S603 `subprocess` call: check for execution of untrusted input
2025-12-12T20:43:18.5887575Z   --> stack_bootstrapper.py:51:18
2025-12-12T20:43:18.5887831Z    |
2025-12-12T20:43:18.5888029Z 50 |     try:
2025-12-12T20:43:18.5888268Z 51 |         result = subprocess.run(
2025-12-12T20:43:18.5888548Z    |                  ^^^^^^^^^^^^^^
2025-12-12T20:43:18.5888807Z 52 |             command,
2025-12-12T20:43:18.5889054Z 53 |             check=True,
2025-12-12T20:43:18.5889285Z    |
2025-12-12T20:43:18.5889400Z 
2025-12-12T20:43:18.5889568Z Q000 [*] Single quotes found but double quotes preferred
2025-12-12T20:43:18.5889906Z   --> stack_bootstrapper.py:55:22
2025-12-12T20:43:18.5890294Z    |
2025-12-12T20:43:18.5890497Z 53 |             check=True,
2025-12-12T20:43:18.5890745Z 54 |             text=True,
2025-12-12T20:43:18.5890997Z 55 |             encoding='utf-8',
2025-12-12T20:43:18.5891256Z    |                      ^^^^^^^
2025-12-12T20:43:18.5891545Z 56 |             capture_output=capture_output,
2025-12-12T20:43:18.5891828Z 57 |         )
2025-12-12T20:43:18.5892037Z    |
2025-12-12T20:43:18.5892277Z help: Replace single quotes with double quotes
2025-12-12T20:43:18.5892498Z 
2025-12-12T20:43:18.5892667Z TRY300 Consider moving this statement to an `else` block
2025-12-12T20:43:18.5893010Z   --> stack_bootstrapper.py:58:9
2025-12-12T20:43:18.5893270Z    |
2025-12-12T20:43:18.5893507Z 56 |             capture_output=capture_output,
2025-12-12T20:43:18.5893793Z 57 |         )
2025-12-12T20:43:18.5894117Z 58 |         return result
2025-12-12T20:43:18.5894358Z    |         ^^^^^^^^^^^^^
2025-12-12T20:43:18.5894615Z 59 |     except FileNotFoundError:
2025-12-12T20:43:18.5895144Z 60 |         # A verificação de Poetry é tratada separadamente, então este é um erro inesperado.
2025-12-12T20:43:18.5895554Z    |
2025-12-12T20:43:18.5895663Z 
2025-12-12T20:43:18.5895772Z E501 Line too long (91 > 88)
2025-12-12T20:43:18.5896047Z   --> stack_bootstrapper.py:60:89
2025-12-12T20:43:18.5896307Z    |
2025-12-12T20:43:18.5896508Z 58 |         return result
2025-12-12T20:43:18.5896769Z 59 |     except FileNotFoundError:
2025-12-12T20:43:18.5897250Z 60 |         # A verificação de Poetry é tratada separadamente, então este é um erro inesperado.
2025-12-12T20:43:18.5897726Z    |                                                                                         ^^^
2025-12-12T20:43:18.5898298Z 61 |         _handle_error(f"Comando '{command[0]}' não encontrado. Verifique se ele está instalado e no PATH.")
2025-12-12T20:43:18.5898806Z 62 |     except subprocess.CalledProcessError as e:
2025-12-12T20:43:18.5899103Z    |
2025-12-12T20:43:18.5899211Z 
2025-12-12T20:43:18.5899334Z E501 Line too long (107 > 88)
2025-12-12T20:43:18.5899613Z   --> stack_bootstrapper.py:61:89
2025-12-12T20:43:18.5899866Z    |
2025-12-12T20:43:18.5900092Z 59 |     except FileNotFoundError:
2025-12-12T20:43:18.5900618Z 60 |         # A verificação de Poetry é tratada separadamente, então este é um erro inesperado.
2025-12-12T20:43:18.5901318Z 61 |         _handle_error(f"Comando '{command[0]}' não encontrado. Verifique se ele está instalado e no PATH.")
2025-12-12T20:43:18.5901821Z    |                                                                                         ^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5902319Z 62 |     except subprocess.CalledProcessError as e:
2025-12-12T20:43:18.5902891Z 63 |         error_message = f"O comando `{' '.join(command)}` falhou com o código de saída {e.returncode}."
2025-12-12T20:43:18.5903301Z    |
2025-12-12T20:43:18.5903433Z 
2025-12-12T20:43:18.5903541Z E501 Line too long (103 > 88)
2025-12-12T20:43:18.5903812Z   --> stack_bootstrapper.py:63:89
2025-12-12T20:43:18.5904180Z    |
2025-12-12T20:43:18.5904667Z 61 |         _handle_error(f"Comando '{command[0]}' não encontrado. Verifique se ele está instalado e no PATH.")
2025-12-12T20:43:18.5905156Z 62 |     except subprocess.CalledProcessError as e:
2025-12-12T20:43:18.5905717Z 63 |         error_message = f"O comando `{' '.join(command)}` falhou com o código de saída {e.returncode}."
2025-12-12T20:43:18.5906189Z    |                                                                                         ^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5906550Z 64 |         if e.stderr and not capture_output:
2025-12-12T20:43:18.5906883Z 65 |             error_message += f"\nErro:\n{e.stderr}"
2025-12-12T20:43:18.5907168Z    |
2025-12-12T20:43:18.5907277Z 
2025-12-12T20:43:18.5907391Z E501 Line too long (89 > 88)
2025-12-12T20:43:18.5907658Z   --> stack_bootstrapper.py:84:89
2025-12-12T20:43:18.5907911Z    |
2025-12-12T20:43:18.5908229Z 82 |             _log(f"⚠️  Backup criado: {backup_path.name}", args)
2025-12-12T20:43:18.5908737Z 83 |         except (OSError, PermissionError) as e:
2025-12-12T20:43:18.5909255Z 84 |             _handle_error(f"Não foi possível criar o backup do arquivo {path.name}: {e}")
2025-12-12T20:43:18.5909704Z    |                                                                                         ^
2025-12-12T20:43:18.5909996Z 85 |
2025-12-12T20:43:18.5910186Z 86 |     try:
2025-12-12T20:43:18.5910390Z    |
2025-12-12T20:43:18.5910498Z 
2025-12-12T20:43:18.5910606Z E501 Line too long (97 > 88)
2025-12-12T20:43:18.5910892Z    --> stack_bootstrapper.py:158:89
2025-12-12T20:43:18.5911150Z     |
2025-12-12T20:43:18.5911553Z 156 |             _handle_error(f"Não foi possível escrever no arquivo pyproject.toml: {e}")
2025-12-12T20:43:18.5911978Z 157 |     elif args.dry_run and config_to_add:
2025-12-12T20:43:18.5912528Z 158 |         _log("Adicionaria configurações de ferramentas ao pyproject.toml", args, is_verbose=True)
2025-12-12T20:43:18.5913031Z     |                                                                                         ^^^^^^^^^
2025-12-12T20:43:18.5913344Z 159 |     elif not config_to_add:
2025-12-12T20:43:18.5913825Z 160 |         _log("✅ Configurações de Ruff, Mypy e Pytest já existem no pyproject.toml.", args)
2025-12-12T20:43:18.5914327Z     |
2025-12-12T20:43:18.5914444Z 
2025-12-12T20:43:18.5914552Z E501 Line too long (91 > 88)
2025-12-12T20:43:18.5914822Z    --> stack_bootstrapper.py:160:88
2025-12-12T20:43:18.5915088Z     |
2025-12-12T20:43:18.5915542Z 158 |         _log("Adicionaria configurações de ferramentas ao pyproject.toml", args, is_verbose=True)
2025-12-12T20:43:18.5915994Z 159 |     elif not config_to_add:
2025-12-12T20:43:18.5916463Z 160 |         _log("✅ Configurações de Ruff, Mypy e Pytest já existem no pyproject.toml.", args)
2025-12-12T20:43:18.5916916Z     |                                                                                         ^^^
2025-12-12T20:43:18.5917211Z 161 |
2025-12-12T20:43:18.5917522Z 162 | def _generate_pre_commit_config(args: argparse.Namespace) -> None:
2025-12-12T20:43:18.5917887Z     |
2025-12-12T20:43:18.5917995Z 
2025-12-12T20:43:18.5918147Z UP024 [*] Replace aliased errors with `OSError`
2025-12-12T20:43:18.5918464Z    --> stack_bootstrapper.py:284:12
2025-12-12T20:43:18.5918726Z     |
2025-12-12T20:43:18.5919006Z 282 |         socket.create_connection(("pypi.org", 443), timeout=5)
2025-12-12T20:43:18.5919476Z 283 |         _log("✅ Conectividade confirmada.", args, is_verbose=True)
2025-12-12T20:43:18.5919875Z 284 |     except (socket.timeout, socket.error, OSError):
2025-12-12T20:43:18.5920354Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5920637Z 285 |         _handle_error(
2025-12-12T20:43:18.5920988Z 286 |             "Não foi possível conectar à internet. "
2025-12-12T20:43:18.5921288Z     |
2025-12-12T20:43:18.5921505Z help: Replace with builtin `OSError`
2025-12-12T20:43:18.5921686Z 
2025-12-12T20:43:18.5921841Z UP041 [*] Replace aliased errors with `TimeoutError`
2025-12-12T20:43:18.5922180Z    --> stack_bootstrapper.py:284:12
2025-12-12T20:43:18.5922442Z     |
2025-12-12T20:43:18.5922716Z 282 |         socket.create_connection(("pypi.org", 443), timeout=5)
2025-12-12T20:43:18.5923181Z 283 |         _log("✅ Conectividade confirmada.", args, is_verbose=True)
2025-12-12T20:43:18.5923594Z 284 |     except (socket.timeout, socket.error, OSError):
2025-12-12T20:43:18.5924035Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5924329Z 285 |         _handle_error(
2025-12-12T20:43:18.5924677Z 286 |             "Não foi possível conectar à internet. "
2025-12-12T20:43:18.5924976Z     |
2025-12-12T20:43:18.5925206Z help: Replace with builtin `TimeoutError`
2025-12-12T20:43:18.5925408Z 
2025-12-12T20:43:18.5925525Z PLR0912 Too many branches (16 > 12)
2025-12-12T20:43:18.5925814Z    --> stack_bootstrapper.py:290:5
2025-12-12T20:43:18.5926079Z     |
2025-12-12T20:43:18.5926275Z 288 |         )
2025-12-12T20:43:18.5926474Z 289 |
2025-12-12T20:43:18.5926909Z 290 | def _create_project_structure(args: argparse.Namespace) -> None:
2025-12-12T20:43:18.5927277Z     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5927646Z 291 |     """Cria a estrutura básica de pastas do projeto."""
2025-12-12T20:43:18.5928093Z 292 |     _log("📁 Criando estrutura de pastas do projeto...", args)
2025-12-12T20:43:18.5928417Z     |
2025-12-12T20:43:18.5928523Z 
2025-12-12T20:43:18.5928705Z D202 [*] No blank lines allowed after function docstring (found 1)
2025-12-12T20:43:18.5929069Z    --> stack_bootstrapper.py:459:5
2025-12-12T20:43:18.5929337Z     |
2025-12-12T20:43:18.5929608Z 458 | def _add_dependencies(args: argparse.Namespace) -> None:
2025-12-12T20:43:18.5930135Z 459 |     """Adiciona as dependências de produção e desenvolvimento ao projeto."""
2025-12-12T20:43:18.5930555Z     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5930833Z 460 |
2025-12-12T20:43:18.5931112Z 461 |     # Dependências de produção são opcionais
2025-12-12T20:43:18.5931404Z     |
2025-12-12T20:43:18.5931673Z help: Remove blank line(s) after function docstring
2025-12-12T20:43:18.5931890Z 
2025-12-12T20:43:18.5932099Z RUF005 Consider `["poetry", "add", *prod_deps]` instead of concatenation
2025-12-12T20:43:18.5932485Z    --> stack_bootstrapper.py:467:22
2025-12-12T20:43:18.5932742Z     |
2025-12-12T20:43:18.5932952Z 465 |         if not _is_windows():
2025-12-12T20:43:18.5933237Z 466 |             prod_deps.append("uvloop")
2025-12-12T20:43:18.5933590Z 467 |         _run_command(["poetry", "add"] + prod_deps, args)
2025-12-12T20:43:18.5934045Z     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5934325Z 468 |     else:
2025-12-12T20:43:18.5934831Z 469 |         _log("⏭️  Pulando dependências de produção (use --install-runtime-deps para incluí-las).", args)
2025-12-12T20:43:18.5935279Z     |
2025-12-12T20:43:18.5935531Z help: Replace with `["poetry", "add", *prod_deps]`
2025-12-12T20:43:18.5935746Z 
2025-12-12T20:43:18.5935853Z E501 Line too long (103 > 88)
2025-12-12T20:43:18.5936142Z    --> stack_bootstrapper.py:469:90
2025-12-12T20:43:18.5936397Z     |
2025-12-12T20:43:18.5936656Z 467 |         _run_command(["poetry", "add"] + prod_deps, args)
2025-12-12T20:43:18.5936970Z 468 |     else:
2025-12-12T20:43:18.5937451Z 469 |         _log("⏭️  Pulando dependências de produção (use --install-runtime-deps para incluí-las).", args)
2025-12-12T20:43:18.5937958Z     |                                                                                         ^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5938382Z 470 |
2025-12-12T20:43:18.5938740Z 471 |     _log("🔧 Adicionando dependências de desenvolvimento...", args)
2025-12-12T20:43:18.5939083Z     |
2025-12-12T20:43:18.5939198Z 
2025-12-12T20:43:18.5939440Z RUF005 Consider `["poetry", "add", "--group", "dev", *dev_deps]` instead of concatenation
2025-12-12T20:43:18.5939867Z    --> stack_bootstrapper.py:476:18
2025-12-12T20:43:18.5940128Z     |
2025-12-12T20:43:18.5940384Z 474 |         "pytest", "pytest-cov", "py-spy", "semgrep"
2025-12-12T20:43:18.5940693Z 475 |     ]
2025-12-12T20:43:18.5941004Z 476 |     _run_command(["poetry", "add", "--group", "dev"] + dev_deps, args)
2025-12-12T20:43:18.5941383Z     |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5941664Z 477 |
2025-12-12T20:43:18.5941962Z 478 | def _setup_pre_commit_hooks(args: argparse.Namespace) -> None:
2025-12-12T20:43:18.5942307Z     |
2025-12-12T20:43:18.5942602Z help: Replace with `["poetry", "add", "--group", "dev", *dev_deps]`
2025-12-12T20:43:18.5942872Z 
2025-12-12T20:43:18.5942985Z E501 Line too long (120 > 88)
2025-12-12T20:43:18.5943266Z    --> stack_bootstrapper.py:485:89
2025-12-12T20:43:18.5943521Z     |
2025-12-12T20:43:18.5943768Z 483 | def _setup_cli() -> argparse.Namespace:
2025-12-12T20:43:18.5944246Z 484 |     """Configura a interface de linha de comando."""
2025-12-12T20:43:18.5944956Z 485 |     parser = argparse.ArgumentParser(description="Automatiza a configuração de um ambiente Python de alta performance.")
2025-12-12T20:43:18.5945695Z     |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5946030Z 486 |     parser.add_argument(
2025-12-12T20:43:18.5946292Z 487 |         "--dry-run",
2025-12-12T20:43:18.5946512Z     |
2025-12-12T20:43:18.5946629Z 
2025-12-12T20:43:18.5946736Z E501 Line too long (116 > 88)
2025-12-12T20:43:18.5947004Z    --> stack_bootstrapper.py:542:88
2025-12-12T20:43:18.5947262Z     |
2025-12-12T20:43:18.5947642Z 540 |     _log("\n✅ Ambiente configurado com sucesso!", args)
2025-12-12T20:43:18.5948097Z 541 |     _log("Execute `poetry shell` para ativar o ambiente virtual.", args)
2025-12-12T20:43:18.5948786Z 542 |     _log("💡 Dica: execute `poetry config virtualenvs.in-project true` para criar o .venv dentro do projeto.", args)
2025-12-12T20:43:18.5949334Z     |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5949920Z 543 |     _log("\n🔒 Lembre-se de commitar o arquivo `poetry.lock` para garantir builds reprodutíveis.", args)
2025-12-12T20:43:18.5950558Z 544 |     _log("\n📚 Consulte o README.md para mais informações sobre o projeto.", args)
2025-12-12T20:43:18.5950947Z     |
2025-12-12T20:43:18.5951058Z 
2025-12-12T20:43:18.5951173Z E501 Line too long (104 > 88)
2025-12-12T20:43:18.5951442Z    --> stack_bootstrapper.py:543:88
2025-12-12T20:43:18.5951706Z     |
2025-12-12T20:43:18.5952013Z 541 |     _log("Execute `poetry shell` para ativar o ambiente virtual.", args)
2025-12-12T20:43:18.5952725Z 542 |     _log("💡 Dica: execute `poetry config virtualenvs.in-project true` para criar o .venv dentro do projeto.", args)
2025-12-12T20:43:18.5953470Z 543 |     _log("\n🔒 Lembre-se de commitar o arquivo `poetry.lock` para garantir builds reprodutíveis.", args)
2025-12-12T20:43:18.5954102Z     |                                                                                         ^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5954616Z 544 |     _log("\n📚 Consulte o README.md para mais informações sobre o projeto.", args)
2025-12-12T20:43:18.5955002Z     |
2025-12-12T20:43:18.5955119Z 
2025-12-12T20:43:18.5955248Z ARG002 Unused method argument: `tmp_path`
2025-12-12T20:43:18.5955561Z    --> tests/test_config_models.py:131:44
2025-12-12T20:43:18.5955837Z     |
2025-12-12T20:43:18.5956074Z 129 |             StackConfig(python_version="2.7")
2025-12-12T20:43:18.5956362Z 130 |
2025-12-12T20:43:18.5956667Z 131 |     def test_path_traversal_rejected(self, tmp_path: Path) -> None:
2025-12-12T20:43:18.5957189Z     |                                            ^^^^^^^^
2025-12-12T20:43:18.5957539Z 132 |         """Test path traversal in project_dir is rejected."""
2025-12-12T20:43:18.5957964Z 133 |         with pytest.raises(ValidationError, match="Path traversal"):
2025-12-12T20:43:18.5958310Z     |
2025-12-12T20:43:18.5958421Z 
2025-12-12T20:43:18.5958704Z SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
2025-12-12T20:43:18.5959178Z   --> tests/test_secure_system.py:64:5
2025-12-12T20:43:18.5959451Z    |
2025-12-12T20:43:18.5959684Z 62 |       service = UserService(repository)
2025-12-12T20:43:18.5959984Z 63 |       user_id = uuid4()
2025-12-12T20:43:18.5960271Z 64 | /     with caplog.at_level(logging.WARNING):
2025-12-12T20:43:18.5960646Z 65 | |         with pytest.raises(UserNotFoundError) as exc_info:
2025-12-12T20:43:18.5961014Z    | |__________________________________________________________^
2025-12-12T20:43:18.5961353Z 66 |               service.get_user(user_id)
2025-12-12T20:43:18.5961628Z    |
2025-12-12T20:43:18.5961849Z help: Combine `with` statements
2025-12-12T20:43:18.5962016Z 
2025-12-12T20:43:18.5962287Z RUF043 Pattern passed to `match=` contains metacharacters but is neither escaped nor raw
2025-12-12T20:43:18.5962744Z   --> tests/test_security_validators.py:69:46
2025-12-12T20:43:18.5963030Z    |
2025-12-12T20:43:18.5963258Z 67 |             validate_python_version("3.9")
2025-12-12T20:43:18.5963541Z 68 |
2025-12-12T20:43:18.5964050Z 69 |         with pytest.raises(ValueError, match="Only Python 3.x"):
2025-12-12T20:43:18.5964453Z    |                                              ^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5964769Z 70 |             validate_python_version("2.7")
2025-12-12T20:43:18.5965047Z    |
2025-12-12T20:43:18.5965357Z help: Use a raw string or `re.escape()` to make the intention explicit
2025-12-12T20:43:18.5965621Z 
2025-12-12T20:43:18.5965769Z I001 [*] Import block is un-sorted or un-formatted
2025-12-12T20:43:18.5966106Z  --> tests/test_stack_script.py:1:1
2025-12-12T20:43:18.5966365Z   |
2025-12-12T20:43:18.5966567Z 1 | / import sys
2025-12-12T20:43:18.5966793Z 2 | | import subprocess
2025-12-12T20:43:18.5967051Z 3 | | from pathlib import Path
2025-12-12T20:43:18.5967348Z 4 | | from unittest.mock import patch, MagicMock
2025-12-12T20:43:18.5967633Z 5 | |
2025-12-12T20:43:18.5967837Z 6 | | import pytest
2025-12-12T20:43:18.5968051Z   | |_____________^
2025-12-12T20:43:18.5968260Z 7 |
2025-12-12T20:43:18.5968701Z 8 |   # Adiciona o diretório raiz ao path para que o `stack_bootstrapper` possa ser importado
2025-12-12T20:43:18.5969108Z   |
2025-12-12T20:43:18.5969312Z help: Organize imports
2025-12-12T20:43:18.5969464Z 
2025-12-12T20:43:18.5969603Z I001 [*] Import block is un-sorted or un-formatted
2025-12-12T20:43:18.5969928Z   --> tests/test_stack_script.py:11:1
2025-12-12T20:43:18.5970187Z    |
2025-12-12T20:43:18.5970465Z  9 | sys.path.insert(0, str(Path(__file__).parent.parent))
2025-12-12T20:43:18.5970785Z 10 |
2025-12-12T20:43:18.5971015Z 11 | import stack_bootstrapper as stack
2025-12-12T20:43:18.5971300Z    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5971549Z    |
2025-12-12T20:43:18.5971748Z help: Organize imports
2025-12-12T20:43:18.5971897Z 
2025-12-12T20:43:18.5972085Z RUF005 Consider `["stack.py", *args]` instead of concatenation
2025-12-12T20:43:18.5972457Z   --> tests/test_stack_script.py:32:36
2025-12-12T20:43:18.5972717Z    |
2025-12-12T20:43:18.5972939Z 30 | def run_main_with_args(args):
2025-12-12T20:43:18.5973397Z 31 |     """Helper para rodar a função main do script com argumentos específicos."""
2025-12-12T20:43:18.5973863Z 32 |     with patch.object(sys, "argv", ["stack.py"] + args):
2025-12-12T20:43:18.5974313Z    |                                    ^^^^^^^^^^^^^^^^^^^
2025-12-12T20:43:18.5974606Z 33 |         stack.main()
2025-12-12T20:43:18.5974832Z    |
2025-12-12T20:43:18.5975061Z help: Replace with `["stack.py", *args]`
2025-12-12T20:43:18.5975251Z 
2025-12-12T20:43:18.5975515Z E501 Line too long (92 > 88)
2025-12-12T20:43:18.5975791Z   --> tests/test_stack_script.py:66:89
2025-12-12T20:43:18.5976061Z    |
2025-12-12T20:43:18.5976358Z 64 |     # Verifica se o novo arquivo também foi criado
2025-12-12T20:43:18.5976689Z 65 |     assert dummy_file.exists()
2025-12-12T20:43:18.5977197Z 66 |     assert "pre-commit-hooks" in dummy_file.read_text()  # Verifica conteúdo do novo arquivo
2025-12-12T20:43:18.5977688Z    |                                                                                         ^^^^
2025-12-12T20:43:18.5977973Z    |
2025-12-12T20:43:18.5978090Z 
2025-12-12T20:43:18.5978232Z ARG001 Unused function argument: `monkeypatch`
2025-12-12T20:43:18.5978566Z    --> tests/test_stack_script.py:150:47
2025-12-12T20:43:18.5978830Z     |
2025-12-12T20:43:18.5979124Z 150 | def test_optional_dependencies_flag(tmp_path, monkeypatch):
2025-12-12T20:43:18.5979488Z     |                                               ^^^^^^^^^^^
2025-12-12T20:43:18.5979776Z 151 |     """
2025-12-12T20:43:18.5980217Z 152 |     Verifica se a flag --install-runtime-deps controla a instalação de dependências.
2025-12-12T20:43:18.5980624Z     |
2025-12-12T20:43:18.5980734Z 
2025-12-12T20:43:18.5980884Z ARG001 Unused function argument: `monkeypatch`
2025-12-12T20:43:18.5981207Z    --> tests/test_stack_script.py:170:46
2025-12-12T20:43:18.5981473Z     |
2025-12-12T20:43:18.5981753Z 170 | def test_install_runtime_deps_flag(tmp_path, monkeypatch):
2025-12-12T20:43:18.5982237Z     |                                              ^^^^^^^^^^^
2025-12-12T20:43:18.5982517Z 171 |     """
2025-12-12T20:43:18.5982937Z 172 |     Verifica se --install-runtime-deps instala as dependências de produção.
2025-12-12T20:43:18.5983316Z     |
2025-12-12T20:43:18.5983431Z 
2025-12-12T20:43:18.5983711Z SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
2025-12-12T20:43:18.5984318Z    --> tests/test_stack_script.py:178:5
2025-12-12T20:43:18.5984588Z     |
2025-12-12T20:43:18.5984894Z 177 |       # Mock platform.system to avoid subprocess issues on Windows
2025-12-12T20:43:18.5985390Z 178 | /     with patch("stack_bootstrapper.platform.system", return_value="Linux"):
2025-12-12T20:43:18.5985831Z 179 | |         with patch("subprocess.run") as mock_run:
2025-12-12T20:43:18.5986162Z     | |_________________________________________________^
2025-12-12T20:43:18.5986551Z 180 |               mock_run.return_value = subprocess.CompletedProcess([], 0)
2025-12-12T20:43:18.5986982Z 181 |               run_main_with_args(["--install-runtime-deps"])
2025-12-12T20:43:18.5987288Z     |
2025-12-12T20:43:18.5987508Z help: Combine `with` statements
2025-12-12T20:43:18.5987678Z 
2025-12-12T20:43:18.5987783Z E501 Line too long (96 > 88)
2025-12-12T20:43:18.5988059Z    --> tests/test_stack_script.py:191:89
2025-12-12T20:43:18.5988329Z     |
2025-12-12T20:43:18.5988608Z 189 |                 and any("pydantic" in str(arg) for arg in call[0][0])
2025-12-12T20:43:18.5988932Z 190 |             ]
2025-12-12T20:43:18.5989319Z 191 |             assert len(poetry_add_calls) > 0, "Poetry add with pydantic should have been called"
2025-12-12T20:43:18.5989778Z     |                                                                                         ^^^^^^^^
2025-12-12T20:43:18.5990062Z     |
2025-12-12T20:43:18.5990175Z 
2025-12-12T20:43:18.5990336Z PLC0415 `import` should be at the top-level of a file
2025-12-12T20:43:18.5990671Z    --> tests/test_stack_script.py:206:5
2025-12-12T20:43:18.5990942Z     |
2025-12-12T20:43:18.5991280Z 205 |     # Verifica se a versão do Python está na configuração
2025-12-12T20:43:18.5991608Z 206 |     import sys
2025-12-12T20:43:18.5991842Z     |     ^^^^^^^^^^
2025-12-12T20:43:18.5992195Z 207 |     expected_version = f"{sys.version_info.major}.{sys.version_info.minor}"
2025-12-12T20:43:18.5992666Z 208 |     assert f'python_version = "{expected_version}"' in content
2025-12-12T20:43:18.5992992Z     |
2025-12-12T20:43:18.5993107Z 
2025-12-12T20:43:18.5993204Z Found 69 errors.
2025-12-12T20:43:18.5993756Z [*] 8 fixable with the `--fix` option (10 hidden fixes can be enabled with the `--unsafe-fixes` option).
2025-12-12T20:43:18.6003378Z ##[error]Process completed with exit code 1.
2025-12-12T20:43:18.6114894Z Post job cleanup.
2025-12-12T20:43:18.7069800Z [command]/usr/bin/git version
2025-12-12T20:43:18.7105985Z git version 2.52.0
2025-12-12T20:43:18.7150935Z Temporarily overriding HOME='/home/runner/work/_temp/cd698ba1-c86e-4d59-a1a7-36158dd46e2d' before making global git config changes
2025-12-12T20:43:18.7152455Z Adding repository directory to the temporary git global config as a safe directory
2025-12-12T20:43:18.7165622Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/Stack/Stack
2025-12-12T20:43:18.7200255Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-12T20:43:18.7232319Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-12T20:43:18.7471411Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-12T20:43:18.7495180Z http.https://github.com/.extraheader
2025-12-12T20:43:18.7507912Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-12-12T20:43:18.7541396Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-12T20:43:18.7790437Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-12T20:43:18.7822912Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-12T20:43:18.8149690Z Cleaning up orphan processes
